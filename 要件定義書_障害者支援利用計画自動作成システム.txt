# 障害者支援利用計画自動作成システム要件定義書

## 1. プロジェクト概要

### 1.1 システム名
障害者支援利用計画自動作成システム

### 1.2 目的
障害者の支援利用計画作成業務において、ボイスメモなどの音声データから重要な情報を自動抽出・分類し、予め設定された雛形に自動出力することで、相談支援専門員の計画作成業務を大幅に効率化し、品質の向上を図る。

### 1.3 対象業務
- 障害者支援利用計画の作成
- セルフプラン作成支援
- 面談記録からの計画書生成
- 計画見直し・更新業務

## 2. ステークホルダー

### 2.1 プライマリーステークホルダー
- **相談支援専門員**: システムの主要利用者
- **相談支援事業所管理者**: 計画書の承認・管理者
- **障害者（利用者）**: 計画書の対象者

### 2.2 セカンダリーステークホルダー
- **システム管理者**: 運用・保守担当
- **開発チーム**: システム構築担当
- **行政機関**: 計画書の審査・承認機関

## 3. 現状分析と課題

### 3.1 現状の問題点
- 支援利用計画の作成に長時間を要する（1件あたり2-3時間）
- 面談内容から計画書への転記作業が煩雑
- 計画書の書式・品質にばらつきがある
- 音声録音データの活用ができていない

### 3.2 期待される効果
- 計画作成時間の大幅短縮（目標：70%削減）
- 計画書の品質向上と標準化
- 相談支援専門員の業務負担軽減
- より多くの利用者への支援提供が可能

## 4. システム構成・技術要件

### 4.1 全体システム構成
- **フロントエンド**: React.js
- **バックエンド・データベース**: Supabase
  - PostgreSQL データベース
  - Supabase Functions（Edge Functions）
  - リアルタイム機能
- **インフラ**: Google Cloud Platform（GCP）
- **AI処理**: Google Gemini API
- **音声処理**: Google Cloud Speech-to-Text API

### 4.2 GCP サービス構成
- **Cloud Run**: Reactアプリケーションのホスティング
- **Cloud Storage**: 音声ファイルの保存
- **Cloud Functions**: 音声処理・AI連携の実行
- **Cloud Speech-to-Text**: 音声認識処理
- **Cloud Load Balancer**: 負荷分散
- **Cloud Monitoring**: システム監視

## 5. 機能要件

### 5.1 音声処理機能
- **音声ファイルアップロード機能**
  - 対応フォーマット: MP3, WAV, M4A, OGG
  - 最大ファイルサイズ: 100MB
  - 最大録音時間: 90分
  - GCP Cloud Storageへの自動保存

- **音声認識・テキスト変換機能**
  - Google Cloud Speech-to-Text APIによる高精度な日本語音声認識
  - 障害福祉専門用語辞書の適用
  - 話者識別機能（複数人の会話対応）
  - ノイズ除去・音質向上処理

### 5.2 バックエンド自動情報分類処理（Supabase Functions）

#### 5.2.1 Gemini API連携機能
- 音声から抽出したテキストをGemini APIに送信
- 障害者支援利用計画特化の情報抽出
- 支援利用計画書の各項目に対応した情報分類処理

#### 5.2.2 自動情報分類処理項目
- **利用者基本情報の分類**
  - 氏名、生年月日、住所、連絡先
  - 障害支援区分、障害の種類・程度
  - 家族構成、緊急連絡先

- **現状・課題の分類**
  - 現在の生活状況
  - 抱えている課題・困りごと
  - 本人・家族の意向・希望
  - 強み、得意なこと（利用者の強みや得意分野）
  - （支援者から見た）課題や困りごと

- **支援目標の分類**
  - 短期目標（6ヶ月以内）
  - 長期目標（1年以上）
  - 目標達成のための具体的な方法

- **サービス利用計画の分類**
  - 利用予定サービス種別
  - サービス内容・頻度・時間
  - 提供事業者情報
  - 利用開始予定日

- **支援体制の分類**
  - 相談支援事業者
  - サービス提供事業者
  - 関係機関（医療・教育・行政等）
  - インフォーマル支援者

- **モニタリング・見直し計画の分類**
  - モニタリング実施時期
  - 評価指標・方法
  - 計画見直しのタイミング

#### 5.2.3 構造化データ出力機能
- 分類済みデータのJSON形式出力
- 雛形対応の項目別データ構造化
- 信頼度スコア付与（抽出精度の指標）
- Supabaseデータベースへの自動保存

### 5.3 フロントエンド自動出力・確認機能（React.js）

#### 5.3.1 雛形自動出力機能
- Supabaseから分類済みデータの自動取得
- 予め設定された支援利用計画書雛形への自動出力
- 各項目への情報の自動配置・表示
- 雛形レイアウトの動的生成

#### 5.3.2 計画書確認・編集画面
- 自動出力された計画書の一覧表示
- 項目別の内容確認・修正機能
- リアルタイム編集機能（Supabase Realtime）
- 未入力項目の視覚的表示
- 入力完了度の進捗表示

#### 5.3.3 承認・出力機能
- 計画書内容の最終確認画面
- 「承認・保存」ボタンによる一括処理
- PDF形式での計画書出力機能
- 印刷対応レイアウト

#### 5.3.4 計画書管理機能
- 作成済み計画書の一覧表示
- 検索・フィルタリング機能
- 履歴管理・バージョン管理
- 計画書のステータス管理

## 6. システム処理フロー

### 6.1 全体処理フロー
1. **音声アップロード**（React → GCP Cloud Storage）
2. **音声認識処理**（GCP Speech-to-Text API）
3. **AI情報抽出・分類**（Supabase Functions → Gemini API）
4. **構造化データ保存**（Supabase Database）
5. **雛形自動出力**（React → Supabase データ取得）
6. **ユーザー確認・編集**（React）
7. **最終承認・保存**（React → Supabase）

### 6.2 データフロー
```
音声ファイル → GCP Cloud Storage → Speech-to-Text → テキストデータ
       ↓
Supabase Functions → Gemini API → 分類済みデータ → Supabase DB
       ↓
React アプリ → 雛形出力 → ユーザー確認 → 最終保存
```

## 7. データ要件

### 7.1 支援利用計画書データ項目

#### 7.1.1 利用者基本情報
- 氏名、生年月日、性別、住所
- 電話番号、緊急連絡先
- 障害支援区分、障害名、手帳情報
- 家族構成、世帯状況

#### 7.1.2 現状・アセスメント
- 現在の生活状況
- 身体機能・精神状態
- 社会参加の状況
- 家族・支援者の状況

#### 7.1.3 本人・家族の意向
- 将来への希望・目標
- 利用したいサービス
- 生活上の優先事項
- 避けたいこと・不安なこと

#### 7.1.4 課題・ニーズ
- 解決すべき課題
- 必要な支援内容
- 緊急度・優先度
- 制約・条件

#### 7.1.5 支援目標
- 長期目標（1年後）
- 短期目標（6ヶ月後）
- 具体的な達成指標
- 目標達成のための手段

#### 7.1.6 サービス利用計画
- 利用サービス種別・内容
- 頻度・時間・期間
- 提供事業者情報
- 利用開始・終了予定日

#### 7.1.7 支援体制
- 相談支援事業者
- サービス提供事業者
- 関係機関・専門職
- 家族・インフォーマル支援

#### 7.1.8 モニタリング計画
- 実施時期・頻度
- 評価方法・指標
- 見直し予定日
- 緊急時対応

### 7.2 Supabaseデータベース設計

#### 7.2.1 主要テーブル
- **users**: ユーザー（相談支援専門員）情報
- **clients**: 利用者（障害者）基本情報
- **support_plans**: 支援利用計画書
- **audio_files**: 音声ファイル情報
- **classification_results**: AI分類結果
- **templates**: 計画書雛形
- **services**: サービス事業者マスタ

#### 7.2.2 データ保存期間
- 音声ファイル: 3年間（GCP Cloud Storage）
- 支援利用計画書: 7年間（Supabase）
- AI分類結果: 1年間（Supabase）
- ログデータ: 2年間（GCP Cloud Logging）

## 8. 非機能要件

### 8.1 性能要件
- **レスポンス時間**
  - 音声アップロード: 15秒以内（50MB以下）
  - AI分類処理: 10分以内（60分の音声）
  - 雛形自動出力: 5秒以内
  - データ保存処理: 3秒以内

- **処理能力**
  - 同時接続ユーザー数: 100人
  - 1日あたり処理可能件数: 500件
  - 音声ファイル保存容量: 10TB

### 8.2 可用性・信頼性
- **稼働率**: 99.9%以上（GCP SLA準拠）
- **データ整合性**: 99.99%以上
- **バックアップ**: 日次自動バックアップ（GCP・Supabase）
- **障害復旧時間**: 2時間以内

### 8.3 セキュリティ要件
- **データ暗号化**: 
  - 保存時: AES-256（GCP・Supabase標準）
  - 通信時: TLS 1.3
- **アクセス制御**: 
  - Supabase RLS（Row Level Security）
  - GCP IAM による細かな権限管理
- **監査ログ**: 全操作の記録・保存
- **個人情報保護**: 個人情報保護法完全準拠

### 8.4 スケーラビリティ
- **水平スケーリング**: GCP Cloud Runによる自動スケーリング
- **データベース**: Supabaseの自動スケーリング機能活用
- **ストレージ**: GCP Cloud Storageの無制限拡張

## 9. ユーザーインターフェース要件

### 9.1 React.js UI/UX要件
- **レスポンシブデザイン**: PC・タブレット・スマートフォン対応
- **直感的操作**: 福祉職員が迷わず使える設計
- **リアルタイム更新**: Supabase Realtimeによる即座な反映
- **オフライン対応**: PWA機能による一部オフライン作業

### 9.2 アクセシビリティ
- **WCAG 2.1 AA準拠**
- **キーボード操作完全対応**
- **スクリーンリーダー対応**
- **高コントラスト表示対応**

## 10. 制約・前提条件

### 10.1 技術的制約
- インターネット接続環境必須
- Gemini API利用制限: 月間処理回数上限
- GCP利用制限: 各サービスのクォータ制限
- Supabase制限: データベース容量・接続数制限

### 10.2 法的・規制制約
- 個人情報保護法の完全遵守
- 障害者総合支援法関連規則の遵守
- 利用者の同意取得必須
- 自治体の計画書様式への対応

### 10.3 予算・期間制約
- 開発期間: 8ヶ月以内
- 運用開始: 2026年3月末まで
- 初期開発費用: 要調整
- 月間運用費用: GCP・Supabase利用料

## 11. リスクと対策

### 11.1 技術的リスク
- **AI分類精度**: 段階的学習・改善、専門用語辞書の充実
- **API制限**: 複数API併用、利用量監視・制御
- **音声品質**: 前処理・ノイズ除去機能強化
- **GCP障害**: マルチリージョン構成、障害時手順整備

### 11.2 運用リスク
- **ユーザー受け入れ**: 十分な研修・マニュアル整備
- **データ漏洩**: 多層セキュリティ対策
- **システム障害**: 24時間監視体制
- **法令変更**: 定期的な仕様見直し

## 12. 成功基準

### 12.1 定量的指標
- 計画作成時間の70%短縮達成
- AI分類精度90%以上
- ユーザー満足度4.5以上（5段階評価）
- システム稼働率99.9%以上
- 月間処理件数1,000件以上

### 12.2 定性的指標
- 相談支援専門員の業務負担大幅軽減
- 計画書品質の向上・標準化達成
- 利用者へのサービス提供時間増加
- 事業所の収益向上

## 13. 開発・運用体制

### 13.1 開発チーム構成
- **プロジェクトマネージャー**: 1名
- **フロントエンドエンジニア（React）**: 2名
- **バックエンドエンジニア（Supabase）**: 1名
- **GCPインフラエンジニア**: 1名
- **AI・機械学習エンジニア**: 1名
- **UI/UXデザイナー**: 1名

### 13.2 運用体制
- **システム管理者**: 2名（24時間対応）
- **ユーザーサポート**: 1名
- **保守・改善担当**: 2名

## 14. 今後の検討事項

### 14.1 要確認事項
- 各自治体の計画書様式への対応範囲
- 既存相談支援システムとの連携要件
- 利用事業所数・ユーザー数の詳細確定
- 音声データの保存・管理ポリシー
- AI学習データの収集・活用方法

### 14.2 将来的な拡張
- 他の障害福祉計画書への対応拡大
- 音声リアルタイム処理機能
- 計画書自動更新・見直し機能
- 他システムとの API連携
- モバイル専用アプリ開発 